# í•œêµ­ ìŒì‹ AI ì—ì´ì „íŠ¸ ì—°êµ¬ì¼ì§€

> **ì‘ì„±ì¼**: 2026-01-30
> **í”„ë¡œì íŠ¸ëª…**: Korean Food Agent
> **ë²„ì „**: 0.1.0

---

## 1. í”„ë¡œì íŠ¸ ê°œìš”

### 1.1 ëª©ì 
ì‚¬ìš©ìê°€ ìŒì‹ ì‚¬ì§„ì„ ì—…ë¡œë“œí•˜ê±°ë‚˜ í…ìŠ¤íŠ¸ë¡œ ì§ˆë¬¸í•˜ë©´, AIê°€ ìŒì‹ì„ ì¸ì‹í•˜ê³  ì‹ë‹¹ ì •ë³´, ë ˆì‹œí”¼, ì˜ì–‘ì •ë³´ ë“±ì„ ì œê³µí•˜ëŠ” **ë©€í‹°ëª¨ë‹¬ ëŒ€í™”í˜• ì—ì´ì „íŠ¸** ì‹œìŠ¤í…œ êµ¬ì¶•.

### 1.2 ì£¼ìš” ê¸°ëŠ¥
| ê¸°ëŠ¥ | ì„¤ëª… | ì‚¬ìš© ë„êµ¬ |
|------|------|----------|
| ìŒì‹ ì´ë¯¸ì§€ ì¸ì‹ | Google Lens APIë¡œ ìŒì‹/ì‹ë‹¹ íŒŒì•… | `search_food_by_image` |
| ì‹ë‹¹ ê²€ìƒ‰ | ì¹´ì¹´ì˜¤ë§µ APIë¡œ ì‹ë‹¹ ì •ë³´ ë° ë©”ë‰´ ì¡°íšŒ | `search_restaurant_info` |
| ë ˆì‹œí”¼ ê²€ìƒ‰ | ë§Œê°œì˜ë ˆì‹œí”¼ ë“±ì—ì„œ í¬ë¡¤ë§ | `search_recipe_online` |
| í›„ê¸° ë¶„ì„ | ì¹´ì¹´ì˜¤ë§µ í›„ê¸° í¬ë¡¤ë§ ë° ìš”ì•½ | `get_restaurant_reviews` |
| ì˜ì–‘ì •ë³´ | ì¹¼ë¡œë¦¬, ë‹¨ë°±ì§ˆ ë“± ì˜ì–‘ì„±ë¶„ ê²€ìƒ‰ | `get_nutrition_info` |
| ì´ë¯¸ì§€ ìˆ˜ì§‘ | ìƒˆ ìŒì‹ ì´ë¯¸ì§€ Supabase DB ì €ì¥ | `save_food_image` |
| ê²€ì¦ ì—…ë°ì´íŠ¸ | ì‚¬ìš©ì í™•ì¸ ì •ë³´ DB ì—…ë°ì´íŠ¸ | `update_food_image` |

---

## 2. ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜

### 2.1 ì „ì²´ êµ¬ì¡°
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         Frontend (Next.js)                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚  â”‚  ChatInput  â”‚  â”‚ ChatMessage  â”‚  â”‚   MapEmbed    â”‚              â”‚
â”‚  â”‚  (ì´ë¯¸ì§€+í…ìŠ¤íŠ¸) â”‚  â”‚ (Markdown)   â”‚  â”‚  (ì¹´ì¹´ì˜¤ë§µ)   â”‚              â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
                                â”‚ HTTP/SSE (POST /chat/stream)
                                â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      Backend (FastAPI)                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                    api/main.py                               â”‚   â”‚
â”‚  â”‚  - POST /chat (ë™ê¸°)                                         â”‚   â”‚
â”‚  â”‚  - POST /chat/stream (SSE ìŠ¤íŠ¸ë¦¬ë°)                          â”‚   â”‚
â”‚  â”‚  - ì„¸ì…˜ ê´€ë¦¬ (agents dict)                                   â”‚   â”‚
â”‚  â”‚  - Base64 ì´ë¯¸ì§€ â†’ ì„ì‹œ íŒŒì¼ ë³€í™˜                             â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
                                â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    LangGraph Agent (src/agent.py)                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  create_react_agent()                                        â”‚   â”‚
â”‚  â”‚  - Gemini 3 Flash Preview LLM                               â”‚   â”‚
â”‚  â”‚  - MemorySaver (ëŒ€í™” íˆìŠ¤í† ë¦¬)                                â”‚   â”‚
â”‚  â”‚  - System Prompt (ë„êµ¬ ì‚¬ìš© ê°€ì´ë“œ)                          â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                â”‚                                    â”‚
â”‚            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚
â”‚            â–¼                   â–¼                   â–¼               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚    Tools (7)    â”‚ â”‚   Services (2)  â”‚ â”‚     DB (1)      â”‚      â”‚
â”‚  â”‚                 â”‚ â”‚                 â”‚ â”‚                 â”‚      â”‚
â”‚  â”‚ â€¢ image.py      â”‚ â”‚ â€¢ serper.py     â”‚ â”‚ â€¢ client.py     â”‚      â”‚
â”‚  â”‚ â€¢ restaurant.py â”‚ â”‚   (Google Lens) â”‚ â”‚   (Supabase)    â”‚      â”‚
â”‚  â”‚ â€¢ recipe.py     â”‚ â”‚                 â”‚ â”‚                 â”‚      â”‚
â”‚  â”‚ â€¢ nutrition.py  â”‚ â”‚ â€¢ kakao.py      â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚  â”‚ â€¢ save_image.py â”‚ â”‚   (ì¹´ì¹´ì˜¤ë§µ API) â”‚                          â”‚
â”‚  â”‚ â€¢ update_image  â”‚ â”‚   (Playwright)  â”‚                          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â–¼                       â–¼                       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ì™¸ë¶€ API    â”‚      â”‚   í¬ë¡¤ë§      â”‚      â”‚  ë°ì´í„°ë² ì´ìŠ¤ â”‚
â”‚              â”‚      â”‚              â”‚      â”‚              â”‚
â”‚ â€¢ SerpAPI    â”‚      â”‚ â€¢ Playwright â”‚      â”‚ â€¢ Supabase   â”‚
â”‚ â€¢ Serper     â”‚      â”‚   (ë©”ë‰´/í›„ê¸°) â”‚      â”‚  (PostgreSQL)â”‚
â”‚ â€¢ Kakao API  â”‚      â”‚ â€¢ requests   â”‚      â”‚              â”‚
â”‚ â€¢ Gemini API â”‚      â”‚   (ë ˆì‹œí”¼)   â”‚      â”‚              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.2 ê¸°ìˆ  ìŠ¤íƒ
| ë ˆì´ì–´ | ê¸°ìˆ  | ë²„ì „/ìƒì„¸ |
|--------|------|----------|
| **LLM** | Gemini 3 Flash Preview | `gemini-3-flash-preview` |
| **ì—ì´ì „íŠ¸** | LangGraph | `create_react_agent` |
| **ë„êµ¬ ì •ì˜** | LangChain | `@tool` ë°ì½”ë ˆì´í„° |
| **ë©”ëª¨ë¦¬** | LangGraph MemorySaver | ì„¸ì…˜ë³„ ëŒ€í™” íˆìŠ¤í† ë¦¬ |
| **ë°±ì—”ë“œ** | FastAPI + Uvicorn | ë™ê¸°/ìŠ¤íŠ¸ë¦¬ë° API |
| **í”„ë¡ íŠ¸ì—”ë“œ** | Next.js 14 + Tailwind CSS | React ê¸°ë°˜ UI |
| **ì§€ë„** | ì¹´ì¹´ì˜¤ë§µ SDK | JavaScript SDK |
| **ë°ì´í„°ë² ì´ìŠ¤** | Supabase (PostgreSQL) | ì´ë¯¸ì§€ ë©”íƒ€ë°ì´í„° |
| **í¬ë¡¤ë§** | Playwright | Headless Chrome |

### 2.3 ì™¸ë¶€ API
| API | ìš©ë„ | ë¹„ìš© |
|-----|------|------|
| SerpAPI | Google Lens ì´ë¯¸ì§€ ê²€ìƒ‰ | ìœ ë£Œ (ì›” 100íšŒ ë¬´ë£Œ) |
| Serper API | í…ìŠ¤íŠ¸ ê²€ìƒ‰ | ìœ ë£Œ (ì›” 2,500íšŒ ë¬´ë£Œ) |
| Kakao Map API | ì‹ë‹¹ ê²€ìƒ‰ | ë¬´ë£Œ |
| Supabase | ë°ì´í„°ë² ì´ìŠ¤ | ë¬´ë£Œ í‹°ì–´ |

---

## 3. í”„ë¡œì íŠ¸ êµ¬ì¡°

### 3.1 ë””ë ‰í† ë¦¬ êµ¬ì¡°
```
food_agent/
â”œâ”€â”€ api/
â”‚   â””â”€â”€ main.py                 # FastAPI ë°±ì—”ë“œ (254ì¤„)
â”‚                               # - POST /chat (ë™ê¸°)
â”‚                               # - POST /chat/stream (SSE ìŠ¤íŠ¸ë¦¬ë°)
â”‚                               # - ì„¸ì…˜ ê´€ë¦¬, ì´ë¯¸ì§€ ì²˜ë¦¬
â”‚
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ agent.py                # LangGraph ReAct ì—ì´ì „íŠ¸ (315ì¤„)
â”‚   â”‚                           # - KoreanFoodAgent í´ë˜ìŠ¤
â”‚   â”‚                           # - ë©€í‹°ëª¨ë‹¬ ë©”ì‹œì§€ ì²˜ë¦¬
â”‚   â”‚                           # - MemorySaver ê¸°ë°˜ íˆìŠ¤í† ë¦¬ ê´€ë¦¬
â”‚   â”‚
â”‚   â”œâ”€â”€ config.py               # í™˜ê²½ ì„¤ì • ê´€ë¦¬ (34ì¤„)
â”‚   â”‚                           # - Settings í´ë˜ìŠ¤ (Pydantic)
â”‚   â”‚                           # - ModelProvider Enum
â”‚   â”‚
â”‚   â”œâ”€â”€ main.py                 # CLI ì§„ì…ì 
â”‚   â”‚
â”‚   â”œâ”€â”€ db/                     # ë°ì´í„°ë² ì´ìŠ¤ ë ˆì´ì–´
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â””â”€â”€ client.py           # Supabase í´ë¼ì´ì–¸íŠ¸ ì‹±ê¸€í†¤ (24ì¤„)
â”‚   â”‚
â”‚   â”œâ”€â”€ services/               # ì™¸ë¶€ API í´ë¼ì´ì–¸íŠ¸
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ serper.py           # Google Lens + í…ìŠ¤íŠ¸ ê²€ìƒ‰ (249ì¤„)
â”‚   â”‚   â”‚                       # - ì´ë¯¸ì§€ ì—…ë¡œë“œ (litterbox, imgbb, freeimage)
â”‚   â”‚   â”‚                       # - EXIF íšŒì „ ë³´ì •
â”‚   â”‚   â”‚                       # - SerpAPI / Serper API í´ë°±
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ kakao.py            # ì¹´ì¹´ì˜¤ë§µ API + Playwright (285ì¤„)
â”‚   â”‚                           # - ì‹ë‹¹ ê²€ìƒ‰
â”‚   â”‚                           # - ë©”ë‰´/í›„ê¸° í¬ë¡¤ë§
â”‚   â”‚
â”‚   â””â”€â”€ tools/                  # LangChain ë„êµ¬ (7ê°œ)
â”‚       â”œâ”€â”€ __init__.py         # ALL_TOOLS ìµìŠ¤í¬íŠ¸
â”‚       â”œâ”€â”€ image.py            # search_food_by_image (135ì¤„)
â”‚       â”œâ”€â”€ restaurant.py       # search_restaurant_info, get_restaurant_reviews (130ì¤„)
â”‚       â”œâ”€â”€ recipe.py           # search_recipe_online (131ì¤„)
â”‚       â”œâ”€â”€ nutrition.py        # get_nutrition_info (89ì¤„)
â”‚       â”œâ”€â”€ save_image.py       # save_food_image (71ì¤„)
â”‚       â””â”€â”€ update_image.py     # update_food_image (72ì¤„)
â”‚
â”œâ”€â”€ frontend/app/               # Next.js í”„ë¡ íŠ¸ì—”ë“œ
â”‚   â”œâ”€â”€ app/
â”‚   â”‚   â”œâ”€â”€ layout.tsx          # ì•± ë ˆì´ì•„ì›ƒ
â”‚   â”‚   â””â”€â”€ page.tsx            # ë©”ì¸ ì±„íŒ… í˜ì´ì§€ (236ì¤„)
â”‚   â”‚
â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”œâ”€â”€ chat-input.tsx      # ì±„íŒ… ì…ë ¥ (ì´ë¯¸ì§€ ì—…ë¡œë“œ ì§€ì›)
â”‚   â”‚   â”œâ”€â”€ chat-message.tsx    # ë©”ì‹œì§€ ë Œë”ë§ (Markdown, ì´ë¯¸ì§€, ì§€ë„)
â”‚   â”‚   â”œâ”€â”€ map-embed.tsx       # ì¹´ì¹´ì˜¤ë§µ ì„ë² ë“œ (313ì¤„)
â”‚   â”‚   â”œâ”€â”€ image-gallery.tsx   # ì´ë¯¸ì§€ ê°¤ëŸ¬ë¦¬
â”‚   â”‚   â”œâ”€â”€ restaurant-card.tsx # ì‹ë‹¹ ì¹´ë“œ
â”‚   â”‚   â”œâ”€â”€ theme-toggle.tsx    # ë‹¤í¬ëª¨ë“œ í† ê¸€
â”‚   â”‚   â””â”€â”€ ui/                 # shadcn/ui ì»´í¬ë„ŒíŠ¸
â”‚   â”‚
â”‚   â”œâ”€â”€ hooks/
â”‚   â”‚   â””â”€â”€ use-toast.ts        # í† ìŠ¤íŠ¸ ì•Œë¦¼ í›…
â”‚   â”‚
â”‚   â””â”€â”€ lib/
â”‚       â”œâ”€â”€ api.ts              # API í´ë¼ì´ì–¸íŠ¸
â”‚       â”œâ”€â”€ types.ts            # TypeScript íƒ€ì… ì •ì˜
â”‚       â””â”€â”€ utils.ts            # ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜
â”‚
â”œâ”€â”€ docs/
â”‚   â””â”€â”€ research_note.md        # ì—°êµ¬ì¼ì§€ (ë³¸ ë¬¸ì„œ)
â”‚
â”œâ”€â”€ .env                        # í™˜ê²½ ë³€ìˆ˜ (API í‚¤)
â”œâ”€â”€ pyproject.toml              # Python í”„ë¡œì íŠ¸ ì„¤ì •
â”œâ”€â”€ requirements.txt            # Python ì˜ì¡´ì„±
â””â”€â”€ run_all.sh                  # ì‹¤í–‰ ìŠ¤í¬ë¦½íŠ¸
```

### 3.2 ëª¨ë“ˆë³„ ì—­í• 
| ëª¨ë“ˆ | íŒŒì¼ | í•µì‹¬ ì—­í•  | ì£¼ìš” í•¨ìˆ˜/í´ë˜ìŠ¤ |
|------|------|-----------|----------------|
| **ì—ì´ì „íŠ¸** | `agent.py` | ReAct íŒ¨í„´ ì—ì´ì „íŠ¸ | `KoreanFoodAgent`, `create_food_agent()` |
| **ì„œë¹„ìŠ¤** | `serper.py` | ì´ë¯¸ì§€/í…ìŠ¤íŠ¸ ê²€ìƒ‰ | `SerperImageSearcher`, `search_with_lens()` |
| **ì„œë¹„ìŠ¤** | `kakao.py` | ì‹ë‹¹ ê²€ìƒ‰/í¬ë¡¤ë§ | `KakaoLocalAPI`, `get_menu_via_playwright()` |
| **ë„êµ¬** | `tools/*.py` | ì—ì´ì „íŠ¸ ë„êµ¬ | `@tool` ë°ì½”ë ˆì´í„° í•¨ìˆ˜ë“¤ |
| **DB** | `client.py` | Supabase ì—°ê²° | `get_supabase_client()` |
| **API** | `main.py` | HTTP ì—”ë“œí¬ì¸íŠ¸ | FastAPI ë¼ìš°í„° |
| **UI** | `page.tsx` | ì±„íŒ… ì¸í„°í˜ì´ìŠ¤ | `ChatPage` ì»´í¬ë„ŒíŠ¸ |

---

## 4. ë„êµ¬(Tools) ìƒì„¸

### 4.1 ë„êµ¬ ëª©ë¡ ë° ì—­í• 
| ë„êµ¬ëª… | ì…ë ¥ | ì¶œë ¥ | ì™¸ë¶€ ì˜ì¡´ì„± |
|--------|------|------|------------|
| `search_food_by_image` | ì´ë¯¸ì§€ ê²½ë¡œ/URL | ê²€ìƒ‰ ê²°ê³¼ + ë¸”ë¡œê·¸ ë³¸ë¬¸ | SerpAPI, Serper |
| `search_restaurant_info` | ê²€ìƒ‰ì–´ | ì‹ë‹¹ ì •ë³´ + ë©”ë‰´ + [MAP:] íƒœê·¸ | Kakao API, Playwright |
| `get_restaurant_reviews` | ì‹ë‹¹ëª… | í›„ê¸° ëª©ë¡ + íƒœê·¸ë³„ í‰ê°€ | Playwright |
| `search_recipe_online` | ê²€ìƒ‰ì–´ | ë ˆì‹œí”¼ (ì¬ë£Œ, ì¡°ë¦¬ìˆœì„œ) | Serper, BeautifulSoup |
| `get_nutrition_info` | ê²€ìƒ‰ì–´ | ì˜ì–‘ì •ë³´ | Serper, BeautifulSoup |
| `save_food_image` | ì´ë¯¸ì§€ URL, ìŒì‹ëª… | image_id | Supabase |
| `update_food_image` | image_id, ê²€ì¦ ì •ë³´ | ì—…ë°ì´íŠ¸ ê²°ê³¼ | Supabase |

### 4.2 ë„êµ¬ë³„ ì‘ë‹µ ì‹œê°„ (ì¸¡ì • ê²°ê³¼)
| ë„êµ¬ | í‰ê·  ì‘ë‹µ ì‹œê°„ | ë¹„ê³  |
|------|--------------|------|
| `search_food_by_image` | 3-5ì´ˆ | ì´ë¯¸ì§€ ì—…ë¡œë“œ + API í˜¸ì¶œ |
| `search_restaurant_info` | 5-6ì´ˆ | Kakao API + Playwright |
| `search_recipe_online` | 1.5-2ì´ˆ | í…ìŠ¤íŠ¸ ê²€ìƒ‰ + í¬ë¡¤ë§ |
| `get_restaurant_reviews` | 8-15ì´ˆ | Playwright í¬ë¡¤ë§ |
| `get_nutrition_info` | 2ì´ˆ | í…ìŠ¤íŠ¸ ê²€ìƒ‰ + í¬ë¡¤ë§ |
| `save_food_image` | 0.4ì´ˆ | Supabase INSERT |
| `update_food_image` | 0.08ì´ˆ | Supabase UPDATE |

### 4.3 ë„êµ¬ ì„ íƒ ë¡œì§ (System Prompt ê¸°ë°˜)
```
ì‚¬ìš©ì ì§ˆë¬¸ ë¶„ì„
      â”‚
      â”œâ”€ ì´ë¯¸ì§€ í¬í•¨? â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ search_food_by_image
      â”‚
      â”œâ”€ "ë§›ì§‘", "ì‹ë‹¹", "ì–´ë””" â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ search_restaurant_info
      â”‚
      â”œâ”€ "ë ˆì‹œí”¼", "ë§Œë“œëŠ” ë²•", "ìš”ë¦¬ë²•" â”€â”€â”€â”€â†’ search_recipe_online
      â”‚
      â”œâ”€ "í›„ê¸°", "ë¦¬ë·°", "í‰ê°€" â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ get_restaurant_reviews
      â”‚
      â”œâ”€ "ì¹¼ë¡œë¦¬", "ì˜ì–‘", "ì—´ëŸ‰" â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ get_nutrition_info
      â”‚
      â””â”€ ì´ì „ ëŒ€í™” ì°¸ì¡° â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ ì»¨í…ìŠ¤íŠ¸ ê¸°ë°˜ ë„êµ¬ ì„ íƒ
```

---

## 5. ì›Œí¬í”Œë¡œìš°ë³„ ìƒì„¸ ì˜ˆì‹œ

### 5.1 ì›Œí¬í”Œë¡œìš° 1: ì´ë¯¸ì§€ë¡œ ìŒì‹ ì¸ì‹

**ì‚¬ìš©ì ì…ë ¥:**
```
[ì´ë¯¸ì§€: ë¹„ë¹”ë°¥ ì‚¬ì§„] ì´ ìŒì‹ ë­ì•¼?
```

**ì‹¤í–‰ íë¦„:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Step 1: í”„ë¡ íŠ¸ì—”ë“œ - ì´ë¯¸ì§€ ì²˜ë¦¬                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 1. ì‚¬ìš©ìê°€ ì´ë¯¸ì§€ ì„ íƒ (ChatInput ì»´í¬ë„ŒíŠ¸)                     â”‚
â”‚ 2. File â†’ Base64 ì¸ì½”ë”©                                        â”‚
â”‚ 3. POST /chat/stream ìš”ì²­                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ìµœì¢… ì‘ë‹µ:**
```
ë¹„ë¹”ë°¥ìœ¼ë¡œ ë³´ì…ë‹ˆë‹¤! ğŸš
ë‹¤ì–‘í•œ ë‚˜ë¬¼ê³¼ ê³ ì¶”ì¥ì´ ì˜¬ë¼ê°„ ì „í†µ ë¹„ë¹”ë°¥ì´ì—ìš”.
í˜¹ì‹œ ì–´ë””ì„œ ë“œì…¨ë‚˜ìš”?
```

---

## 6. Supabase ë°ì´í„°ë² ì´ìŠ¤ í†µí•©

### 6.1 í…Œì´ë¸” ìŠ¤í‚¤ë§ˆ
```sql
CREATE TABLE food_images (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    image_url TEXT NOT NULL,
    food_name TEXT,
    food_category TEXT,
    food_source_type TEXT DEFAULT 'unknown',
    restaurant_name TEXT,
    location TEXT,
    food_verified BOOLEAN DEFAULT FALSE,
    restaurant_verified BOOLEAN DEFAULT FALSE,
    created_at TIMESTAMPTZ DEFAULT NOW()
);

CREATE INDEX idx_food_images_food_name ON food_images(food_name);
CREATE INDEX idx_food_images_verified ON food_images(food_verified, restaurant_verified);
```

### 6.2 ê²€ì¦ í”Œë¡œìš°
```
ì‚¬ìš©ì ì´ë¯¸ì§€ ì—…ë¡œë“œ
        â”‚
        â–¼
search_food_by_image í˜¸ì¶œ
        â”‚
        â–¼
ì—ì´ì „íŠ¸ê°€ ì¬ë„¤ì¼ê³¼ ì›ë³¸ ì´ë¯¸ì§€ ë¹„êµ
        â”‚
        â”œâ”€ ì›¹ì— ìˆìŒ â†’ ì €ì¥ ì•ˆí•¨
        â”‚
        â””â”€ ìƒˆ ì´ë¯¸ì§€ â†’ save_food_image í˜¸ì¶œ
                â”‚
                â–¼
        DB ì €ì¥ (food_verified: false)
                â”‚
                â–¼
        ì‚¬ìš©ì í™•ì¸ í›„ update_food_image í˜¸ì¶œ
```

### 6.3 ë¶€ë¶„ ê²€ì¦ ì§€ì›
| ìƒí™© | food_verified | restaurant_verified |
|------|--------------|--------------------|
| ì €ì¥ ì§í›„ | false | false |
| "ë¹„ë¹”ë°¥ì´ì•¼" | **true** | false |
| "ëª…ë™ ë³¸ê°€ì—ì„œ ë¨¹ì—ˆì–´" | true | **true** |
| "ì§‘ì—ì„œ ë§Œë“¤ì—ˆì–´" | true | N/A (source_type="home_cooked") |

---

## 7. ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸

```python
SYSTEM_PROMPT = """ë‹¹ì‹ ì€ í•œêµ­ ìŒì‹ ì „ë¬¸ê°€ AI ì–´ì‹œìŠ¤í„´íŠ¸ì…ë‹ˆë‹¤.

## í•µì‹¬ ì›ì¹™
- ì‚¬ìš©ì ì§ˆë¬¸ì— ë§ëŠ” ë„êµ¬ë¥¼ ì„ íƒí•´ì„œ í˜¸ì¶œí•˜ì„¸ìš”
- ì¶”ì¸¡í•˜ì§€ ë§ê³  ë„êµ¬ ê²°ê³¼ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ë‹µë³€í•˜ì„¸ìš”
- ë„êµ¬ ê²°ê³¼ë¥¼ ê·¸ëŒ€ë¡œ ì „ë‹¬í•˜ì§€ ë§ê³ , í•µì‹¬ë§Œ êµ¬ì¡°í™”í•´ì„œ ë‹µë³€í•˜ì„¸ìš”
- í•œêµ­ì–´ë¡œ ìì—°ìŠ¤ëŸ½ê²Œ ëŒ€í™”í•˜ê³  ì´ëª¨ì§€ë¥¼ ì ì ˆíˆ ì‚¬ìš©í•˜ì„¸ìš”
"""
```

---

## 8. í”„ë¡ íŠ¸ì—”ë“œ êµ¬ì¡°

### 8.1 ì£¼ìš” ì»´í¬ë„ŒíŠ¸
| ì»´í¬ë„ŒíŠ¸ | íŒŒì¼ | ì—­í•  |
|----------|------|------|
| `ChatPage` | `page.tsx` | ë©”ì¸ ì±„íŒ… í˜ì´ì§€, ìƒíƒœ ê´€ë¦¬ |
| `ChatInput` | `chat-input.tsx` | ë©”ì‹œì§€ ì…ë ¥, ì´ë¯¸ì§€ ì—…ë¡œë“œ |
| `ChatMessage` | `chat-message.tsx` | ë©”ì‹œì§€ ë²„ë¸”, Markdown ë Œë”ë§ |
| `MapEmbed` | `map-embed.tsx` | ì¹´ì¹´ì˜¤ë§µ ì„ë² ë“œ, ë§ˆì»¤ í‘œì‹œ |
| `ImageGallery` | `image-gallery.tsx` | ì´ë¯¸ì§€ ê°¤ëŸ¬ë¦¬ |
| `RestaurantCard` | `restaurant-card.tsx` | ì‹ë‹¹ ì •ë³´ ì¹´ë“œ |

### 8.2 ìŠ¤íŠ¸ë¦¬ë° ì²˜ë¦¬ (SSE)
```typescript
for await (const event of streamChatMessage(message, images)) {
  switch (event.type) {
    case 'tool':
      if (event.status === 'start') {
        setToolStatus(`${TOOL_NAMES_KR[event.tool]} ì¤‘...`);
      }
      break;
    case 'text':
      aiContent += event.content;
      updateMessage(aiContent);
      break;
    case 'done':
      mapUrl = event.map_url;
      images = event.images;
      break;
  }
}
```

---

## 9. í™˜ê²½ ì„¤ì •

### 9.1 í•„ìˆ˜ í™˜ê²½ ë³€ìˆ˜ (.env)
```bash
GOOGLE_API_KEY=your-google-api-key
SERPAPI_KEY=your-serpapi-key
SERPER_API_KEY=your-serper-api-key
KAKAO_API_KEY=your-kakao-api-key
SUPABASE_URL=https://xxx.supabase.co
SUPABASE_ANON_KEY=your-anon-key
MODEL_PROVIDER=gemini
GEMINI_MODEL=gemini-3.0-flash
```

### 9.2 Python ì˜ì¡´ì„±
```
langchain>=0.3.0
langchain-core>=0.3.0
langchain-google-genai>=2.0.0
langchain-openai>=0.2.0
langgraph>=0.2.0
fastapi>=0.115.0
uvicorn>=0.32.0
python-dotenv>=1.0.0
requests>=2.32.0
beautifulsoup4>=4.12.0
playwright>=1.48.0
supabase>=2.0.0
Pillow>=10.0.0
nest-asyncio>=1.6.0
```

### 9.3 ì‹¤í–‰ ë°©ë²•
```bash
pip install -r requirements.txt
playwright install chromium
python -m uvicorn api.main:app --reload --port 8000
cd frontend/app && npm run dev
# ë˜ëŠ”
./run_all.sh
```

---

## 10. API ëª…ì„¸

### 10.1 POST /chat (ë™ê¸°)
```bash
curl -X POST http://localhost:8000/chat \
  -H "Content-Type: application/json" \
  -d '{"message": "ê°•ë‚¨ì—­ ë§›ì§‘ ì¶”ì²œí•´ì¤˜", "session_id": "optional"}'
```

### 10.2 POST /chat/stream (SSE)
```
data: {"type": "session", "session_id": "abc-123"}
data: {"type": "tool", "tool": "search_restaurant_info", "status": "start"}
data: {"type": "tool", "tool": "search_restaurant_info", "status": "done"}
data: {"type": "text", "content": "ê°•ë‚¨ì—­"}
data: {"type": "text", "content": " ë§›ì§‘"}
data: {"type": "done", "map_url": "37.497,127.028,...", "images": []}
```

### 10.3 POST /session/clear
```bash
curl -X POST "http://localhost:8000/session/clear?session_id=abc-123"
```

### 10.4 DELETE /session/{session_id}
```bash
curl -X DELETE http://localhost:8000/session/abc-123
```

---

## 11. ì„±ëŠ¥ ì¸¡ì • ê²°ê³¼

### 11.1 ë„êµ¬ë³„ ì‘ë‹µ ì‹œê°„
| ë„êµ¬ | ì¸¡ì •ê°’ | êµ¬ì„± |
|------|--------|------|
| search_food_by_image | 3-5ì´ˆ | ì—…ë¡œë“œ 1-2ì´ˆ + API 2-3ì´ˆ |
| search_restaurant_info | 5-6ì´ˆ | Kakao API 0.5ì´ˆ + Playwright 5ì´ˆ |
| search_recipe_online | 1.5-2ì´ˆ | Serper 0.5ì´ˆ + í¬ë¡¤ë§ 1-1.5ì´ˆ |
| get_restaurant_reviews | 8-15ì´ˆ | Playwright ì „ì²´ |
| get_nutrition_info | 2ì´ˆ | Serper 0.5ì´ˆ + í¬ë¡¤ë§ 1.5ì´ˆ |
| save_food_image | 0.4ì´ˆ | Supabase INSERT |
| update_food_image | 0.08ì´ˆ | Supabase UPDATE |

### 11.2 E2E ì‘ë‹µ ì‹œê°„ (ì „ì²´ ì›Œí¬í”Œë¡œìš°)
| ì‹œë‚˜ë¦¬ì˜¤ | í‰ê·  ì‹œê°„ |
|----------|----------|
| ì´ë¯¸ì§€ ì¸ì‹ + DB ì €ì¥ | 5-6ì´ˆ |
| ì‹ë‹¹ ê²€ìƒ‰ + ì§€ë„ | 6-7ì´ˆ |
| ë ˆì‹œí”¼ ê²€ìƒ‰ | 3-4ì´ˆ |
| í›„ê¸° ê²€ìƒ‰ | 10-16ì´ˆ |

---

## 12. í–¥í›„ ê°œì„  ë°©í–¥

### 12.1 ë‹¨ê¸° ê°œì„ 
- [ ] Redis ìºì‹± (ì‹ë‹¹ ì •ë³´, ë©”ë‰´)
- [ ] ë„êµ¬ ë³‘ë ¬ ì‹¤í–‰
- [ ] ì—ëŸ¬ í•¸ë“¤ë§ ê°•í™”

### 12.2 ì¤‘ê¸° ê°œì„ 
- [ ] ë²¡í„° DB í†µí•© (ì´ì „ ê²€ìƒ‰ ê²°ê³¼ ì‹œë§¨í‹± ê²€ìƒ‰)
- [ ] ì´ë¯¸ì§€ ì„ë² ë”© (CLIP ëª¨ë¸)
- [ ] ë©€í‹°ì—ì´ì „íŠ¸ ì•„í‚¤í…ì²˜

### 12.3 ì¥ê¸° ê°œì„ 
- [ ] ìŒì„± ì¸ì‹ í†µí•©
- [ ] ì‹¤ì‹œê°„ ì˜ˆì•½ ê¸°ëŠ¥
- [ ] ê°œì¸í™” ì¶”ì²œ ì‹œìŠ¤í…œ

---

## ì°¸ê³  ìë£Œ

- [LangGraph ê³µì‹ ë¬¸ì„œ](https://langchain-ai.github.io/langgraph/)
- [LangChain Tools ë¬¸ì„œ](https://python.langchain.com/docs/concepts/tools/)
- [Gemini API ë¬¸ì„œ](https://ai.google.dev/docs)
- [Kakao Map API](https://developers.kakao.com/docs/latest/ko/local/dev-guide)
- [Supabase ë¬¸ì„œ](https://supabase.com/docs)
- [Playwright ë¬¸ì„œ](https://playwright.dev/python/docs/intro)
